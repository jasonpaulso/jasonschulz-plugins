{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/jasonpaulso/jasonschulz-plugins/schemas/feature-list.schema.json",
  "title": "Feature List",
  "description": "Schema for tracking multi-session feature development work items",
  "type": "object",
  "required": ["feature", "created", "status", "items"],
  "properties": {
    "feature": {
      "type": "string",
      "description": "Name/title of the feature being developed"
    },
    "description": {
      "type": "string",
      "description": "Detailed description of the feature"
    },
    "created": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp when the feature plan was created"
    },
    "updated": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of last update"
    },
    "status": {
      "type": "string",
      "enum": ["planning", "in-progress", "blocked", "complete", "abandoned"],
      "description": "Overall feature status"
    },
    "estimatedSessions": {
      "type": "integer",
      "minimum": 1,
      "description": "Estimated number of sessions to complete"
    },
    "completedSessions": {
      "type": "integer",
      "minimum": 0,
      "description": "Number of sessions completed"
    },
    "items": {
      "type": "array",
      "description": "Session-sized work items",
      "items": {
        "$ref": "#/definitions/WorkItem"
      }
    },
    "metadata": {
      "type": "object",
      "description": "Additional context from planning phase",
      "properties": {
        "complexity": {
          "type": "string",
          "enum": ["simple", "medium", "complex", "epic"]
        },
        "riskFactors": {
          "type": "array",
          "items": { "type": "string" }
        },
        "technicalNotes": {
          "type": "string"
        },
        "relatedFiles": {
          "type": "array",
          "items": { "type": "string" }
        },
        "dependencies": {
          "type": "array",
          "items": { "type": "string" }
        }
      }
    }
  },
  "definitions": {
    "WorkItem": {
      "type": "object",
      "required": ["id", "description", "status"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for this work item (e.g., 'item-001')"
        },
        "description": {
          "type": "string",
          "description": "Clear description of what needs to be done"
        },
        "status": {
          "type": "string",
          "enum": ["pending", "in-progress", "complete", "blocked", "skipped"],
          "description": "Current status of the work item"
        },
        "acceptanceCriteria": {
          "type": "array",
          "description": "Conditions that must be true for item to be complete",
          "items": {
            "type": "string"
          }
        },
        "verification": {
          "type": "array",
          "description": "Commands to run to verify completion",
          "items": {
            "$ref": "#/definitions/VerificationCommand"
          }
        },
        "estimatedEffort": {
          "type": "string",
          "enum": ["small", "medium", "large"],
          "description": "Relative effort estimate"
        },
        "dependencies": {
          "type": "array",
          "description": "IDs of work items that must be completed first",
          "items": {
            "type": "string"
          }
        },
        "blockedBy": {
          "type": "string",
          "description": "Reason if status is 'blocked'"
        },
        "notes": {
          "type": "string",
          "description": "Implementation notes or context"
        },
        "startedAt": {
          "type": "string",
          "format": "date-time"
        },
        "completedAt": {
          "type": "string",
          "format": "date-time"
        },
        "sessionId": {
          "type": "string",
          "description": "Session ID that completed this item"
        }
      }
    },
    "VerificationCommand": {
      "type": "object",
      "required": ["command"],
      "properties": {
        "command": {
          "type": "string",
          "description": "Shell command to run"
        },
        "description": {
          "type": "string",
          "description": "What this verification checks"
        },
        "expectedExitCode": {
          "type": "integer",
          "default": 0,
          "description": "Expected exit code (0 = success)"
        },
        "expectedOutput": {
          "type": "string",
          "description": "Regex pattern to match in output"
        },
        "timeout": {
          "type": "integer",
          "default": 30,
          "description": "Timeout in seconds"
        },
        "optional": {
          "type": "boolean",
          "default": false,
          "description": "If true, failure doesn't block completion"
        }
      }
    }
  }
}
